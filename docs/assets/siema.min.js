!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Siema",[],t):"object"==typeof exports?exports.Siema=t():e.Siema=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.CachedEventRegistry=function(){function e(){r(this,e),this._listeners=new Set;for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];this._lastArgs=n}return s(e,[{key:"listen",value:function(e){var t=this;return this._listeners.add(e),this._lastArgs.length&&e.apply(void 0,i(this._lastArgs)),function(){return t._listeners.remove(e)}}},{key:"notify",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._lastArgs=t,this._listeners.forEach(function(e){return e.apply(void 0,t)})}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Siema=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0);t.Siema=function(){function e(t){if(i(this,e),this._config=e.mergeSettings(t),this._eventRegistry=new s.CachedEventRegistry,this._selector="string"==typeof this._config.selector?document.querySelector(this._config.selector):this._config.selector,null===this._selector)throw new Error("Something wrong with your selector ðŸ˜­");var n=e._supportsTransform();this._transitionProperty=n?"transition":"WebkitTransition",this._transformProperty=n?"transform":"WebkitTransform",this._innerElements=Array.from(this._selector.children),this._resetFrameSlides(),this._resizeHandler=this._resizeHandler.bind(this),this._touchstartHandler=this._touchstartHandler.bind(this),this._touchendHandler=this._touchendHandler.bind(this),this._touchmoveHandler=this._touchmoveHandler.bind(this),this._mousedownHandler=this._mousedownHandler.bind(this),this._mouseupHandler=this._mouseupHandler.bind(this),this._mouseleaveHandler=this._mouseleaveHandler.bind(this),this._mousemoveHandler=this._mousemoveHandler.bind(this),this._attachEvents(),this._setCurrentSlide(0),this._slideToCurrent()}return r(e,[{key:"onChange",value:function(e){return this._eventRegistry.listen(e)}},{key:"prev",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.moveBy(-e)}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.moveBy(e)}},{key:"moveBy",value:function(t){return this.goTo(e.clamp(this.currentSlide+t,0,this._innerSlides.length))}},{key:"goTo",value:function(t){var n=this._currentSlide;this._setCurrentSlide(e.clamp(t,0,this._innerElements.length)),n!==this._currentSlide&&this._slideToCurrent()}},{key:"remove",value:function(e){if(e<0||e>=this._innerElements.length)throw new Error("Item to remove doesn't exist ðŸ˜­");this._setCurrentSlide(e<=this._currentSlide?this._currentSlide-1:this._currentSlide),this._innerElements.splice(e,1),this._resetFrameSlides()}},{key:"insert",value:function(e,t){if(t<0||t>this._innerElements.length+1)throw new Error("Unable to inset it at this index ðŸ˜­");if(this._innerElements.indexOf(e)!==-1)throw new Error("The same item in a carousel? Really? Nope ðŸ˜­");this._setCurrentSlide(t<=this._currentSlide?this._currentSlide+1:this._currentSlide),this._innerElements.splice(t,0,e),this._resetFrameSlides()}},{key:"prepend",value:function(e){this.insert(e,0)}},{key:"append",value:function(e){this.insert(e,this._innerElements.length+1)}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._detachEvents(),e){this._selector.innerHTML="";var t=document.createDocumentFragment();this._innerElements.forEach(function(e){return t.appendChild(e)}),this._selector.appendChild(t),this._selector.removeAttribute("style")}}},{key:"_setCurrentSlide",value:function(e){this._currentSlide=e,this._eventRegistry.notify(this._currentSlide)}},{key:"_attachEvents",value:function(){window.addEventListener("resize",this._resizeHandler),this._config.draggable&&(this._pointerDown=!1,this._drag={startX:0,endX:0,startY:0,letItGo:null},this._selector.addEventListener("touchstart",this._touchstartHandler,{passive:!0}),this._selector.addEventListener("touchend",this._touchendHandler),this._selector.addEventListener("touchmove",this._touchmoveHandler,{passive:!0}),this._selector.addEventListener("mousedown",this._mousedownHandler),this._selector.addEventListener("mouseup",this._mouseupHandler),this._selector.addEventListener("mouseleave",this._mouseleaveHandler),this._selector.addEventListener("mousemove",this._mousemoveHandler))}},{key:"_detachEvents",value:function(){window.removeEventListener("resize",this._resizeHandler),this._selector.style.cursor="auto",this._selector.removeEventListener("touchstart",this._touchstartHandler),this._selector.removeEventListener("touchend",this._touchendHandler),this._selector.removeEventListener("touchmove",this._touchmoveHandler),this._selector.removeEventListener("mousedown",this._mousedownHandler),this._selector.removeEventListener("mouseup",this._mouseupHandler),this._selector.removeEventListener("mouseleave",this._mouseleaveHandler),this._selector.removeEventListener("mousemove",this._mousemoveHandler)}},{key:"_resetFrameSlides",value:function(){var t=this;this._selector.style.overflow="hidden",this._selector.style.textAlign="center",this._sliderFrame=document.createElement("div"),this._sliderFrame.style.width="auto",this._sliderFrame.style.display="inline-flex",this._setTransition(this._config.duration,this._config.easing),this._setTranslation(0),this._config.draggable&&this._setCursor(e.GRAB_CURSOR),this._innerSlides=this._innerElements.map(function(e){var t=document.createElement("div");return t.classList.add("siema-slide"),t.style.flex="0 0 auto",t.style.width="auto",t.appendChild(e),t}),this._innerSlides.forEach(function(e){return t._sliderFrame.appendChild(e)}),this._selector.innerHTML="",this._selector.appendChild(this._sliderFrame)}},{key:"_calculateTranslation",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._selector.getBoundingClientRect().width,r=this._sliderFrame.getBoundingClientRect().width,s=this._innerSlides.map(function(e){return e.getBoundingClientRect().width}),o=s.slice(0,t).reduce(function(e,t){return e+t},0),a=i/2-o-s[t]/2,l=n?0:1/0,u=n?Math.min(0,i-r):-(1/0);return e.clamp(a,u,l)}},{key:"_slideToCurrent",value:function(){this._slideToIndex(this._currentSlide)}},{key:"_slideToIndex",value:function(e){var t=this._calculateTranslation(e,this._config.stickToEdges);this._setTranslation(t)}},{key:"_setTranslation",value:function(t){this._sliderFrame.style[this._transformProperty]=e.translate(t),this._currentTranslation=t}},{key:"_setTransition",value:function(t,n){this._sliderFrame.style[this._transitionProperty]=e.transition(t,n)}},{key:"_setCursor",value:function(e){this._selector.style.cursor=e}},{key:"_updateAfterDrag",value:function(){var t=this,n=this._innerSlides.map(function(e,n){return t._calculateTranslation(n,!1)}),i=e.closest(this._currentTranslation,n);this._setCurrentSlide(n.indexOf(i)),this._slideToCurrent()}},{key:"_resizeHandler",value:function(){this._slideToCurrent()}},{key:"_clearDrag",value:function(){this._drag={startingTranslation:0,startX:0,endX:0,startY:0,letItGo:null}}},{key:"_touchstartHandler",value:function(e){e.stopPropagation(),this._pointerDown=!0,this._drag.startX=e.touches[0].pageX,this._drag.startY=e.touches[0].pageY}},{key:"_touchendHandler",value:function(e){e.stopPropagation(),this._pointerDown=!1,this._drag.endX&&this._updateAfterDrag(),this._setTransition(this._config.duration,this._config.easing),this._clearDrag()}},{key:"_touchmoveHandler",value:function(e){if(e.stopPropagation(),null===this._drag.letItGo&&(this._drag.letItGo=Math.abs(this._drag.startY-e.touches[0].pageY)<Math.abs(this._drag.startX-e.touches[0].pageX)),this._pointerDown&&this._drag.letItGo){this._drag.endX=e.touches[0].pageX,this._setTransition(0,this._config.easing);var t=this._calculateTranslation(this._currentSlide,this._config.stickToEdges)-(this._drag.startX-this._drag.endX);this._setTranslation(t)}}},{key:"_mousedownHandler",value:function(t){t.preventDefault(),t.stopPropagation(),this._pointerDown=!0,this._drag.startX=t.pageX,this._drag.startingTranslation=this._currentTranslation,this._setCursor(e.GRABBING_CURSOR)}},{key:"_mouseupHandler",value:function(t){t.stopPropagation(),this._pointerDown=!1,this._setCursor(e.GRAB_CURSOR),this._setTransition(this._config.duration,this._config.easing),this._updateAfterDrag(),this._clearDrag()}},{key:"_mousemoveHandler",value:function(e){if(e.preventDefault(),this._pointerDown){this._drag.endX=e.pageX;var t=this._drag.startingTranslation-(this._drag.startX-this._drag.endX);this._setTransition(0,this._config.easing),this._setTranslation(t)}}},{key:"_mouseleaveHandler",value:function(t){this._pointerDown&&(this._pointerDown=!1,this._drag.endX=t.pageX,this._setCursor(e.GRAB_CURSOR),this._setTransition(this._config.duration,this._config.easing),this._updateAfterDrag(),this._clearDrag())}},{key:"currentSlide",get:function(){return this._currentSlide}}],[{key:"transition",value:function(e,t){return"transform "+e+"ms "+t}},{key:"translate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return"translate3d("+e+"px, "+t+"px, "+n+"px)"}},{key:"clamp",value:function(e,t,n){return Math.max(t,Math.min(n,e))}},{key:"closest",value:function(e,t){return t.reduce(function(t,n){return Math.abs(n-e)<Math.abs(t-e)?n:t})}},{key:"mergeSettings",value:function(e){return Object.assign({},{selector:void 0,duration:200,easing:"ease-out",stickToEdges:!0,draggable:!0},e)}},{key:"_supportsTransform",value:function(){var e=document.documentElement.style;return"string"==typeof e.transform}},{key:"GRAB_CURSOR",get:function(){return"-webkit-grab"}},{key:"GRABBING_CURSOR",get:function(){return"-webkit-grabbing"}}]),e}()}])});